---
title: cryptography-key
date: 2020-04-16 12:06:54
tags:
- key
categories:
- cryptography
---
## 키

### 키는 대단히 큰 수
- 암호 기술을 사용하려면 반드시 키라 불리는 대단히 큰 수가 필요
- 중요한 것은 수 그 자체의 크기보다도 키 공간(Key Space)의 크기
- 키 공간의 크기는 키의 비트 길이로 결정
- 암호별 키 길이
    - AES: 128,192,256 비트
    - RSA: 1024, 2048
### 키는 평문과 동일한 가치를 갖는다
- 키는 평문과 같은 가치
    - 도청자 이브에게 키는 평문과 같은 것

### 암호 알고리즘과 키
- 암호의 기본 상식
    - 검증된 암호 알고리즘을 사용
    - 정보의 기밀성은 암호 알고리즘을 비밀로 하는 것이 아님
    - 키를 비밀로 하는 것에 의해 기밀성이 지켜져야 함

### 다양한 키
- 대칭 암호
    - 키는 송신자와 수신자만 공유
    - 양측이 공유 키를 비밀로 유지
![](/images/cryptography/key/symmetric_cypher.png)

- 공개 키 암호
    - 암호화와 복호화에서 다른 키 사용
    - 개인 키를 비밀로 유지
![](/images/cryptography/key/asymmetric_cypher.png)

- 메세지 인증 코드
    - 송신자와 수신자가 공통의 키를 사용해서 인증을 수행
![](/images/cryptography/key/mac_key.png)
    
- 디지털 서명
    - *서명 작성*과 *서명 검증*에 서로 다른 키를 사용
![](/images/cryptography/key/digital_signature_key.png)

### 기밀성을 위한 키와 인증을 위한 키
- 보안 속성에 따른 분류
    - 기밀성을 유지하기 위한 키
        - 대칭 암호나 공개 키 암호에서 사용하는 키
        - 복호화 키를 모르면 복호화 불가
    - 인증을 수행하기 위한 키
        - 메세지 인증 코드나 디지털 서명에서 사용하는 키
        - 키를 모르면 데이터 변경이나 위장 불가
- 키 사용 횟수에 따른 분류
    - 세션 키(Session Key)
       - 통신 때마다 한 번만 사용 되는 키
    - 마스터 키(Master Key)
       - 반복적으로 사용 되는 키
       
### 컨텐츠를 암호화 하는 키와 키를 암호화 하는 키
- CEK (contents encrypting key) : 정보(콘텐츠)가 암호화의 대상
- KEK (key encrypting key) : 키가 암호화의 대상
![](/images/cryptography/key/cek_kek.png)

### 키 관리
1. 키 생성
- 난수를 이용한 키 생성
    - 난수 사용 : 키 성질로 다른 사람이 추측하기 어려워야 한다를 가져야 하기 때문
    - 난수 생성 : 하드웨어를 사용하는 것이 좋지만, 통상적으로 암호용으로 설계된 의사 난수 생성기 소프트웨어를 사용
    - 자신이 적당한 바이트 열을 만들면 안 됨
        - 스스로는 랜덤한 값이라고 생각하고 생성해도, 거기에는 인위적인 편중이 있기 때문에 랜덤한 값이 되지 못함
    - 암호용으로 이용하는 의사난수 생성기
        - 반드시 암호용으로 설계되어 있는 것을 선택
        - 암호용으로 설계되어 있지 않은 의사난수 생성기는 예측불가능 성질을 갖지 않기 때문

- 패스워드를 이용한 키 생성
    - 패스워드 (password) 
    - 패스 프레이즈 (passphrase) : 복수의 단어로 이루어지는 긴 패스워드
    - 패스워드를 키로 직접 이용하지 않고, 패스워드를 일방향 해시 함수에 입력해서 얻어진 해시 값을 키로 이용
    
- PBE와 salt
    - Password Based Encryption
    - 패스워드에 salt라 불리는 난수를 부가해서 일방향 해시 함수에 입력하고 그 출력을 키로 사용
    - 사전 공격(Dictinary attack)을 막기 위한 조치

2. 키 배송
- 키 배송 문제
    - 키를 사전에 공유
    - 키 배포 센터
    - 공개키 암호
    - *Diffie-Hellman 키 교환*
    
3. 키 갱신 (key updating)
- 현재 키의 해시값을 다음 키로 사용
- 키 노출시 과거 통신의 복호화를 막을 수 있다.
- 이를 백워드 시큐리티라 한다.

4. 키 보존
- 키를 반복해서 사용할 경우 키 보존 문제를 고려
    - 키 기억 : 보통 실용적 키의 크기나 비트화된 표현 등으로 기억할 수 없다.
    - 키 암호화 : KEK(Key Encryption Key)
![](/images/cryptography/key/key_hierarchy.png)
    https://www.crocus.co.kr/1233
    https://rsec.kr/?p=242
    