---
title: cryptography-birthday-attack
date: 2020-04-08 20:43:42
tags:
- hash
categories:
- cryptography
---
### 비둘기집의 원리
- n+1개읜 물건을 n개의 상재에 넣을 때 적어도 어느 한 상자에는 두 개 이상의 물건이 들어 있다는 원리를 말한다.
- 비둘기와 비둘기집의 형태로 비유되어 쓰이며, '서랍-양말'로 비유하여 서랍원칙으로 나타내기도 한다.
- n개의 비둘기집과 n+1마리의 비둘기가 있다고 가정한다.
  만약 각 비둘기집에 한 마리 이하의 비둘기만 들어 있다면, 전체 비둘기집에는 많아야 n마리의 비둘기가 존재한다. 
  그런데 비둘기는 모두n+1마리이므로, 이것은 모순이다. 따라서 어느 비둘기집에는 두 마리 이상의 비둘기가 있다.
  
### 일반화
- n개의 별개의 사물을 m개의 용기에 나누어 담으면 적어도 한 개의 용기는 $\begin{bmatrix}\frac{n}{m}\end{bmatrix}$  이상의 사물을 담고 있어야 한다. 
    (여기서, $\begin{bmatrix}{x}\end{bmatrix}$는 x보다 작지 않은 최소 정수를 의미한다.)

- 확률론적으로 일반화 된 비둘기집 원리는 다음과 같다.
    $\frac{1}{m}$의 균일한 확률로 n개의 비둘기를 무작위로 m개의 비둘기집에 넣었다면 확률적으로 적어도 하나의 비둘기집에 두마리 이상의 비둘기가 들어가게 된다.
    $1-{\frac  {m!}{(m-n)!\;m^{n}}}=1-{\frac  {m(m-1)(m-2)\cdots (m-n+1)}{m^{n}}}\!$

- 비둘기의 수가 비둘기집의 수를 초과하지 않는다 하더라도, 비둘기 분배의 무작위적인 성질에 의하여 종종 상당한 확률로 충돌이 일어난다.

### Birthday Problem
- 사람이 임의로 모였을 때 그 중에 생일이 같은 두명이 존재할 확률을 구하는 문제
- 생일의 가능한 가짓수는 366개 이므로 366명 이상의 사람이 모인다면 비둘기집 원리에 따라 생일이 같은 두 명이 반드시 존재
- 생일이 같은 두 사람을 찾는 것과 비슷하게, 암호학적 해시 결과가 같은(해시 충돌) 두 입력값을 찾는 것 역시 모든 입력값을 계산하지 않아도 충분히 높은 확률로 해시 충돌을 찾을 수 있다. 
    이러한 암호 공격을 생일 공격(birthday attack)이라고 부른다.

### 확률 계산    
- n명의 사람이 있을 때 그 중 생일이 같은 사람이 둘 이상 있을 확률을 ${p(n)}$ 이라고 한다면, 반대로 모든 사람의 생일이 다를 확률 
    $\overline{p}{(n)}$은 $1-{p(n)}$ 이 된다. $\overline{p}{(n)}$을 구해보면 두번째 사람의 생일은 첫 번째 사람과 다르고, 세 번째 사람의 생일은 첫번째와 두번째 모두와 달라야 한다.
    최종적으로 구하고자 하는 생일이 같은 사람이 둘 이상 있을 확률 ${p(n)}$은
    ${p(n)} = 1 - {\frac{365!}{365^n * (365-n)!}}$ 가 된다. 여기서, ${n\leqq365}$ 인 자연수이고, !는 계승을 의미한다.
    여기서 ${p(n)}$ 값을 특정 n 값에 대해 계산하면 다음과 같다.

  
|n|${p(n)}$|
|:-:|:--------:|
|1|0.0%| 
|5|2.7%|
|10|11.7%|
|20|41.1%|
|23|50.7%|
|30|70.6%|
|40|89.1%|
|50|97.0%|
|60|99.4%|
|70|99.9%|
|100|99.99997%|

- 즉 23명 이상 모이면 같은 확률이 50% 이상이고, 100명이 모이면 거의 1에 가까워지는것을 알 수 있다.


